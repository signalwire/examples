<!DOCTYPE html>
<html>
  <head>
    <title>Preview</title>
    <meta charset="UTF-8" />
    <style>
        #preview{ width:200px; }
        #previewPlaceholder{ width:200px; height:120px; background:#ddd; color:#666; display:flex; align-items: center; justify-content: center; margin-bottom:10px;}
    </style>
  </head>

  <body>
    <img id="preview"/>
    <div id="previewPlaceholder">Generating preview</div>
    <script src="embed.js"></script>
    <script>
    SignalWire.Prebuilt.VideoRoom({
        token: 'vpt_43a7bb37f75dbbd411821d472b9b8b90',
        setupRoomSession: function(r){
            window.room = r;
            r.on("room.joined",(room)=>{
                console.log(r.previewUrl)
                setInterval(()=>{
                    console.log("Trying to refresh preview.")
                    let preview_img = r.previewUrl;
                    let previewContainer = document.getElementById("preview").src=preview_img;
                    document.getElementById("previewPlaceholder").style.display="none"
                },10000)
            })
        }
    });
    </script>
  </body>
</html>
